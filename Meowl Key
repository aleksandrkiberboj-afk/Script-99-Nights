local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("Meowl Scripter | Premium v5.6", "Midnight")

-- [[ ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ ]]
local lp = game.Players.LocalPlayer
_G.Authenticated = false

-- [[ СОЗДАНИЕ КНОПКИ ОТКРЫТИЯ (КАК НА СКРИНЕ) ]]
local ScreenGui = Instance.new("ScreenGui")
local OpenBtn = Instance.new("TextButton")

ScreenGui.Parent = game:GetService("CoreGui")
ScreenGui.Name = "MeowlToggleButton"

OpenBtn.Name = "OpenButton"
OpenBtn.Parent = ScreenGui
OpenBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
OpenBtn.BorderSizePixel = 2
OpenBtn.Position = UDim2.new(0, 0, 0.45, 0) -- Слева сбоку
OpenBtn.Size = UDim2.new(0, 80, 0, 30)
OpenBtn.Font = Enum.Font.SourceSansBold
OpenBtn.Text = "Meowl :3"
OpenBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
OpenBtn.TextSize = 14
OpenBtn.Visible = false -- Изначально скрыта

-- Скругление как на картинке
local btnCorner = Instance.new("UICorner", OpenBtn)
btnCorner.CornerRadius = math.min(0, 15)

-- [[ ЛОГИКА СКРЫТИЯ/ОТКРЫТИЯ ]]
local mainFrame = nil
task.spawn(function()
    local gui = game:GetService("CoreGui"):WaitForChild("Meowl Scripter", 10)
    mainFrame = gui:FindFirstChild("Main")
    if mainFrame then
        mainFrame.Size = UDim2.new(0, 380, 0, 420)
        mainFrame.Position = UDim2.new(0.5, -190, 0.5, -210)
    end
end)

local function ToggleUI()
    if mainFrame then
        local isVisible = mainFrame.Visible
        mainFrame.Visible = not isVisible
        OpenBtn.Visible = isVisible -- Показываем кнопку, если меню скрыто
    end
end

OpenBtn.MouseButton1Click:Connect(ToggleUI)

-- [[ ВКЛАДКИ ]]
local Auth = Window:NewTab("Key / Ключ")
local Main = Window:NewTab("Main / Главная")
local Settings = Window:NewTab("Settings")

-- [[ СЕКЦИЯ КЛЮЧА ]]
local AuthSec = Auth:NewSection("Authorization")
AuthSec:NewTextBox("Enter Key", "Meowl / Meowl20", function(text)
    if text == "Meowl" or text == "Meowl20" then
        _G.Authenticated = true
        AuthSec:NewLabel("Access Granted! / Доступ разрешен")
    end
end)

-- [[ ОСНОВНЫЕ ФУНКЦИИ ]]
local MainSec = Main:NewSection("Automation")
MainSec:NewToggle("Auto Chop / Авто-рубка", "Farms trees", function(state)
    if not _G.Authenticated then return end
    _G.AutoChop = state
    task.spawn(function()
        while _G.AutoChop do
            pcall(function()
                for _, v in pairs(workspace.GameObjects.Resources.Trees:GetChildren()) do
                    fireclickdetector(v:FindFirstChildOfClass("ClickDetector"))
                end
            end)
            task.wait(0.3)
        end
    end)
end)

-- [[ НАСТРОЙКИ И ЗАКРЫТИЕ ]]
local SetSec = Settings:NewSection("Interface Settings")

-- Кнопка закрытия как на скрине
SetSec:NewButton("Close Menu / Скрыть панель", "Shows Toggle Button", function()
    ToggleUI()
end)

SetSec:NewButton("Destroy Script / Удалить", "Full remove", function()
    game:GetService("CoreGui"):FindFirstChild("Meowl Scripter"):Destroy()
    ScreenGui:Destroy()
end)

print("Meowl Scripter v5.6 with Side Toggle Button Loaded!")

